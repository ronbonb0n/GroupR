# GroupR
## World map design proceduralism
**_Note_: World map isn't procedurally generated within game, instead this proceduralism is an experimentation with tools that can speed up level development.**<br/>
The tiles that make up the map are generated by and image - each pixel represents the tile.<br/>

Currently the generator can support up to 10 different tile types and changes to the code base can be implemented to expand this.<br/>

Tile rotation is not yet implemented - can be done if RGB values are used, instead of just luminosity.<br/>

The generator image is found in the root/Assets/ directory.<br/>

For some reason only jpeg seemed to work. This might be due to encoding methods JPEG encodes per pixel, 
whilst PNG encodes for each scan-line of pixel.<br/>

The generator script runs within the engine editor for ease of use.<br/>

The generator will build the navmesh required for the topdown nav for you but this can be overwritten manually via Unity's Navigation tab.<br/>

**The pixel values currently used are tabulated below**
Tile Type | Hex Code(#) | Decimal
--- | --- | ---
Grass | FFFFFF | 1.0
Deep Grass | E6E6E6 | 0.9
Dying Grass | CCCCCC | 0.8
Dead Space | B2B2B2 | 0.7
Bridge | 999999 | 0.6
Tower/Level | 808080 | 0.5
Water | 000000 | 0.0
Sci-Fi Bridge | 666666 | 0.4

**_Note_:Currently the Coast block is not being used and may be dropped**<br/>
**_Note_:Water block technically represents a lack of a block for render efficiency as we can represent the water with just a single plain**<br/>

**Updates to the generator will be placed in the table when neccassary**<br/>

To use the tool:<br/>
1. Open image in any image editting software - I prefer Krita it's free and fairly powerful
2. Adjust image with a solid square brush - Krita has a pixel art brush which is ideal
    * Use colours tabulated above to correspond with desired tiles
3. Export the output overwriting past image - or export new output but make sure to encode it properly with JPEG max quality
    * If you export a new image when in Unity:
      * Enable read/write in image properties
      * Set format to RGBA32
      * Set non power of 2 to None
4. Within the world map scene there is already an object called world builder that contains the builder script
    * Make sure the correct prefabs are assigned
    * Make sure the correct world generator texture is assigned
5. It is recommenended that you delete the game object called **Parent** that holds all of the tiles within it's heirarchy
6. Go back to your world builder GameObject and click the execute boolean button - Your updated world will be built<br/>

## Player Control in world map
Player control is powered by Unity's Navmesh system.<br/>

Click on a tile with the left mouse button and go.<br/>

Initially the plan was to build a custom A* pathfinder - but with the functionality and performance of Unity's NavMesh system I decided there wasn't much point in reinventing the wheel. Time could be better spent elsewhere.<br/>

**Plans to implement a tile highlighting system for improved accessibility**<br/>

## Camera control in world map
Camera is controlled via a combination of mouse and keyboard inputs.<br/>

Consideration has been taken to allow a user to control the camera with either a laptop touchpad or mouse to improve accessibilty.<br/>

Controls have been updated with Unity's new input system to allow for easier remapping <br/>

**Controls tabulated below**
Output | Keyboard | Mouse | Gesture
--- | --- | --- | ---
Pan-Left | A | N/A | N/A
Pan-Right | D | N/A | N/A
Pan-Foward | W | N/A | N/A
Pan-Back | S | N/A | N/A
Rotate | Q or E (Direction dependent) | N/A | N/A
Zoom In | R | Scroll Up | MousePad - Two finger swipe up
Zoom Out | F | Scroll Down | MousePad - Two finger swipe down

**Remapping yet to be implemented**

## Level transitioning
Level transitioning is driven by a simple trigger overlap with the player character.<br/>

Once the player overlaps the trigger - is within one tile of the level trigger they can click on the map object which will call the level transition.<br/>

**Some kind of element will be rendered to highlight that the player can call the transition to act as positive feedback for improved accessibility**<br/>

## Frame Rate Cap
Simple script to cap the number of frames - cap is public.<br/>

**Cap will be adjustable to allow for higher and lower end machines**<br/>

## AI Drones

### Sight

Drone sight has a radius and angle, implemented by sphere overlap & ray cast

### States

Using a state machine to switch between behaviors of AI drones:

- Idle (initial state)
- Patrol - Pick random patrol locations and auto-path to them, using a navmesh at the drones' height
- Look Around - Wait for a few seconds before heading to next patrol location
- Chase - Chase the player if the player is in sight
- Deactivated - Falls to the ground

